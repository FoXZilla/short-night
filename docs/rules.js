!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=54)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(22);var i;e.DEBUG=!1,function(t){t.Timeline="time_line",t.Axis="axis",t.AxisBody="axis_body",t.AxisScale="axis_scale",t.AxisMilestone="axis_milestone",t.Event="event",t.EventBody="event_body",t.EventMark="event_mark",t.EventAxis="event_axis"}(i=e.SN||(e.SN={})),e.DATE_COUNT_EXTRA={day:432e5,week:3024e5,month:1296e6,quarter:3888e6,year:15552e6},e.WALK_ON={[i.EventAxis]:{offsetOneStep:15}},e.SN_VERSION=o.version},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{d(o.next(t))}catch(t){r(t)}}function a(t){try{d(o.throw(t))}catch(t){r(t)}}function d(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}d((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(0);function r(t){return"object"==typeof t&&"number"==typeof t.x&&"number"==typeof t.y&&"number"==typeof t.width&&"number"==typeof t.height}function s(t){return[{startX:t.x,startY:t.y,endX:t.x+t.width,endY:t.y},{startX:t.x+t.width,startY:t.y,endX:t.x+t.width,endY:t.y+t.height},{startX:t.x+t.width,startY:t.y+t.height,endX:t.x,endY:t.y+t.height},{startX:t.x,startY:t.y+t.height,endX:t.x,endY:t.y}]}function a(t,e){let{startX:n,startY:o,endX:i,endY:r}=t,{startX:s,startY:a,endX:d,endY:h}=e;if([n,i,s,d,o,r,a,h].some(isNaN))throw TypeError("Unexpected NaN");[n,i,s,d,o,r,a,h]=[n,i,s,d,o,r,a,h].map(Math.round);const[c,f]=[Math.abs(n-i)/Math.abs(o-r),Math.abs(s-d)/Math.abs(a-h)];if(c===f){const[t,e]=[n,i].sort((t,e)=>e-t),[f,l]=[o,r].sort((t,e)=>e-t);return 0===c?(a<=f&&a>=l||h<=f&&h>=l)&&n===s:c===1/0?(s<=t&&s>=e||d<=t&&d>=e)&&o===a:s<=t&&s>=e&&a<=f&&a>=l||d<=t&&d>=e||h<=f&&h>=l}c===1/0&&(o+=1e-4),f===1/0&&(a+=1e-4),0===c&&(n+=1e-4),0===f&&(s+=1e-4);const l=((n*r-o*i)*(s-d)-(n-i)*(s*h-a*d))/((n-i)*(a-h)-(o-r)*(s-d)),u=((n*r-o*i)*(a-h)-(o-r)*(s*h-a*d))/((n-i)*(a-h)-(o-r)*(s-d));if(isNaN(l)||isNaN(u))return!1;if(n>=i){if(!(i<=l&&l<=n))return!1}else if(!(n<=l&&l<=i))return!1;if(o>=r){if(!(r<=u&&u<=o))return!1}else if(!(o<=u&&u<=r))return!1;if(s>=d){if(!(d<=l&&l<=s))return!1}else if(!(s<=l&&l<=d))return!1;if(a>=h){if(!(h<=u&&u<=a))return!1}else if(!(a<=u&&u<=h))return!1;return!0}e.isBox=r,e.box2Lines=s,e.parseBox=function(t){const e=getComputedStyle(t);return{x:parseFloat(e.left),y:parseFloat(e.top),width:parseFloat(e.width),height:parseFloat(e.height)}},e.mergeBox=function(...t){const e={x:1/0,y:1/0},n={x:-1/0,y:-1/0};for(const o of t)o.x<e.x&&(e.x=o.x),o.y<e.y&&(e.y=o.y),o.x+o.width>n.x&&(n.x=o.x+o.width),o.y+o.height>n.y&&(n.y=o.y+o.height);return{x:e.x,y:e.y,width:n.x-e.x,height:n.y-e.y}},e.shrinkBox=function(t,e=1){return{x:t.x+e,y:t.y+e,width:t.width-2*e,height:t.height-2*e}},e.isIntersecting=a,e.isOverlap=function(t,e){const n=r(t)?s(t):[t],o=r(e)?s(e):[e];return n.some(t=>o.some(e=>a(t,e)))},e.walkLoop=function(t,e=10){return o(this,void 0,void 0,function*(){let n=!1;for(let o=0;o<e;o++){const e=yield t();if(e.includes("alleviated"))n=!0;else{if(e.every(t=>"no-conflict"===t))return"no-conflict";if(e.includes("failed"))return n?"alleviated":"failed"}}throw new Error("too many loop")})},e.createLogFunction=function(t){return function(e,...n){if(!i.DEBUG)return;const o=[e[0]];for(let t=0;t<n.length;t++)o.push(n[t],e[t+1]);console.log(`${t} #`,...o)}},e.deepFreeze=function t(e){const n=JSON.parse(JSON.stringify(e)),o=Object.getOwnPropertyNames(n);for(const e of o)"object"==typeof n[e]&&null!==n[e]&&(n[e]=t(n[e]));return Object.freeze(n)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(0).DEBUG&&console.log("The night is short, walk on girl."),n(23);var o=n(6);e.Timeline=o.default;var i=n(5);e.Axis=i.default;var r=n(8);e.AxisScale=r.default;var s=n(9);e.AxisMilestone=s.default;var a=n(7);e.AxisBody=a.default;var d=n(10);e.Event=d.default;var h=n(11);e.EventMark=h.default;var c=n(12);e.EventAxis=c.default;var f=n(13);e.EventBody=f.default;var l=n(3);e.Component=l.default;var u=n(20);e.ExtensionManager=u.ExtensionManager,e.BoxElementGenerator=u.BoxElementGenerator,e.GeneratorId=u.GeneratorId,e.PositionCounter=u.PositionCounter,e.BreakpointAnimation=u.BreakpointAnimation,e.ConflictFixer=u.ConflictFixer},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{d(o.next(t))}catch(t){r(t)}}function a(t){try{d(o.throw(t))}catch(t){r(t)}}function d(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}d((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(1);var r;!function(t){t[t.SUPER_APPLY=0]="SUPER_APPLY",t[t.SUPER_DRAW=1]="SUPER_DRAW",t[t.SUPER_DESTROY=2]="SUPER_DESTROY",t[t.SUPER_CREATE_ELEMENT=3]="SUPER_CREATE_ELEMENT",t[t.SUPER_CREATE_BOX=4]="SUPER_CREATE_BOX",t[t.SUPER_HIDE=5]="SUPER_HIDE"}(r||(r={}));e.default=class{constructor({ext:t,canvas:e,container:n}){this.extraData={},this.destroyed=!1,this.ext=t,this.canvas=e,this.container=n}createElement(){return this.element&&this.container.removeChild(this.element),this.element=document.createElement("div"),this.element.classList.add("short-night",this.theme,this.name),this.container.appendChild(this.element),r.SUPER_CREATE_ELEMENT}createBox(){return r.SUPER_CREATE_BOX}destroy(){return this.checkDestroy(),this.hide(),this.destroyed=!0,this.ext.onDestroy(this),r.SUPER_DESTROY}apply(...t){return o(this,void 0,void 0,function*(){return this.checkDestroy(),this.element&&(this.drawInfo.box=i.mergeBox(this.drawInfo.box,i.parseBox(this.element))),yield this.ext.onApply(this),r.SUPER_APPLY})}draw(){return this.checkDestroy(),this.ext.onDraw(this),r.SUPER_DRAW}hide(){return this.checkDestroy(),this.element&&(this.element.style.visibility="hidden"),this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.ext.onHide(this),r.SUPER_HIDE}importDrawInfo(t){return this.drawInfo=t,this}get l(){return i.createLogFunction(`${this.theme}/${this.name}`)}checkDestroy(){if(this.destroyed)throw new Error(`${this.theme}/${this.name} has bean destroyed,`+"however, you still called it's method.")}}},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{d(o.next(t))}catch(t){r(t)}}function a(t){try{d(o.throw(t))}catch(t){r(t)}}function d(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}d((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(0),r=n(25),s=n(5),a=n(7),d=n(6);var h;!function(t){t.PushScalesAndMilestones="PushScalesAndMilestones",t.FixEventBody2AxisMilestone="FixEventBody2AxisMilestone",t.FixEventAxis2EventAxis="FixEventAxis2EventAxis",t.FixEventBody2EventBodyMover="FixEventBody2EventBodyMover",t.FixEventBody2EventBodyFloater="FixEventBody2EventBodyFloater",t.DrawFrom="DrawFrom",t.Debug="Debug"}(h=e.Breakpoint||(e.Breakpoint={}));class c{constructor(t,{breakpoints:e=[],playAnimation:n=!1}={}){this.etx=t,this.breakpoints=e,this.playAnimation=n,this.playAnimation&&0===this.breakpoints.length&&(this.breakpoints=c.defaultAnimationBreakpoints),i.DEBUG&&(this.breakpoints.push(h.Debug),window.next=this.next.bind(this),window.abort=(()=>{delete this.stepIn}))}onDraw(t){d.default.is(t)&&this.playAnimation&&(new r).move(this.etx.components[i.SN.Timeline][0].canvas)}next(){if(!this.stepIn)throw new Error("Call next when not blocking.");this.stepIn(),delete this.stepIn}block(t,e={}){return o(this,void 0,void 0,function*(){const{onBlock:n,onNext:i,components:s=[],forward:a=!1}=e;if(this.breakpoints.includes(t)){if(console.log(`Blocking at ${t}.`),this.playAnimation){const n=this.countScrollTarget(e);n&&new r({duration:50}).move(n-document.documentElement.scrollTop),setTimeout(()=>this.next(),this.countInterval(t,a))}return(()=>o(this,void 0,void 0,function*(){n&&(yield n()),s.forEach(t=>t.draw()),yield new Promise(t=>{this.stepIn=(()=>o(this,void 0,void 0,function*(){i&&(yield i()),s.forEach(t=>t.hide()),t()}))})}))()}})}countScrollTarget(t){const{components:e,protagonist:n}=t;if(n)return n.drawInfo.box.y-100;if(e&&e.length){return(t=>t.find(e=>t.every(t=>e.drawInfo.box.y>=t.drawInfo.box.y)))(e.filter(t=>!s.default.is(t)&&!a.default.is(t))).drawInfo.box.x-100}return null}countInterval(t,e){return t===h.DrawFrom?300:e?200:300}}c.defaultAnimationBreakpoints=[h.FixEventBody2AxisMilestone,h.FixEventAxis2EventAxis,h.FixEventBody2EventBodyMover,h.FixEventBody2EventBodyFloater,h.DrawFrom],e.default=c},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{d(o.next(t))}catch(t){r(t)}}function a(t){try{d(o.throw(t))}catch(t){r(t)}}function d(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}d((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(3),r=n(0),s=n(1);e.default=class extends i.default{constructor(t){super(t),this.name=r.SN.Axis,this.drawInfo={scales:[],milestones:[],length:0,box:{x:0,y:0,width:0,height:0}},this.milestones=[],this.scales=[],this.body=null,this.grid=t.grid,this.ext.onConstruct(this)}createBox(){return this.drawInfo.box=s.mergeBox(this.body.drawInfo.box,...this.milestones.map(t=>t.drawInfo.box),...this.scales.map(t=>t.drawInfo.box)),super.createBox()}apply(){const t=t=>super[t];return o(this,void 0,void 0,function*(){return this.initBody(),yield this.body.apply(),this.initScales(),this.initMilestones(),yield Promise.all([...this.scales.map(t=>t.apply()),...this.milestones.map(t=>t.apply())]),this.createBox(),t("apply").call(this)})}draw(){return this.body.draw(),this.scales.forEach(t=>t.draw()),this.milestones.forEach(t=>t.draw()),super.draw()}destroy(){return this.body.destroy(),this.scales.forEach(t=>t.destroy()),this.milestones.forEach(t=>t.destroy()),super.destroy()}hide(){return this.body.hide(),this.scales.forEach(t=>t.hide()),this.milestones.forEach(t=>t.hide()),super.hide()}initBody(){this.body&&this.body.destroy(),this.body=new this.bodyConstructor(this),this.body.drawInfo.length=this.drawInfo.length,this.body.drawInfo.width=this.grid.axisWidth,this.body.drawInfo.start=this.grid.axisStart}initScales(){this.scales.forEach(t=>t.destroy()),this.scales.length=0;for(const t of this.drawInfo.scales){if(this.drawInfo.milestones.some(e=>e.position===t))continue;const e=new this.scaleConstructor(this);e.drawInfo.bodyDrawInfo=s.deepFreeze(this.body.drawInfo),e.drawInfo.alignY=t,e.drawInfo.height=this.grid.scaleHeight,this.scales.push(e)}}initMilestones(){this.milestones.forEach(t=>t.destroy()),this.milestones.length=0;for(const{position:t,content:e}of this.drawInfo.milestones){const n=new this.milestoneConstructor(this);n.drawInfo.bodyDrawInfo=s.deepFreeze(this.body.drawInfo),n.drawInfo.alignY=t,n.drawInfo.content=e,this.milestones.push(n)}}static is(t){return t.name===r.SN.Axis}}},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{d(o.next(t))}catch(t){r(t)}}function a(t){try{d(o.throw(t))}catch(t){r(t)}}function d(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}d((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(3),r=n(0),s=n(4),a=n(26),d=n(2);class h extends i.default{constructor(t){super({ext:t.ext||new d.ExtensionManager,canvas:t.canvas,container:t.container}),this.name=r.SN.Timeline,this.runtime={},this.drawInfo={box:{x:0,y:0,width:0,height:0},events:[]},this.events=[],this.axis=null,this.grid=t.grid||h.defaultGrid,this.ext.onConstruct(this)}apply(t){const e=t=>super[t];return o(this,void 0,void 0,function*(){return this.initRuntime(t),this.canvas.width=this.grid.canvasWidth,this.canvas.height=this.runtime.axisLength+2*this.grid.axisStart.y,yield this.initAxis(),yield this.axis.apply(),this.events.forEach(t=>t.destroy()),this.events.length=0,this.initEvents(),yield Promise.all(this.events.map(t=>t.apply())),e("apply").call(this)})}draw(){return this.axis.draw(),this.events.forEach(t=>t.draw()),super.draw()}hide(){return this.events.forEach(t=>t.hide()),this.axis.hide(),super.hide()}drawFrom(t){return o(this,void 0,void 0,function*(){const e="string"==typeof t?JSON.parse(t).data:t.data,n=new this.axisConstructor(this),o=new this.eventConstructor(this);this.canvas.width=e.width,this.canvas.height=e.height,e.axis.milestonesDrawInfo.forEach(t=>{"date"in t.content&&(t.content.date=new Date(t.content.date))});const i=[];{const{bodyDrawInfo:t,scalesDrawInfo:o,milestonesDrawInfo:r}=e.axis;i.push(new n.bodyConstructor(this).importDrawInfo(t));const s=[];o.forEach(t=>{s.push(new n.scaleConstructor(this).importDrawInfo(t))}),r.forEach(t=>{s.push(new n.milestoneConstructor(this).importDrawInfo(t))}),s.sort((t,e)=>t.drawInfo.alignY-e.drawInfo.alignY),i.push(...s)}const r=Array.from(e.events).sort((t,e)=>t.drawInfo.target.y-e.drawInfo.target.y);for(const{bodyDrawInfo:t,markDrawInfo:e,axisDrawInfo:n}of r)i.push(new o.markConstructor(this).importDrawInfo(e)),i.push(new o.bodyConstructor(this).importDrawInfo(t)),null!==n&&i.push(new o.axisConstructor(this).importDrawInfo(n));for(const t of i)yield this.ext.breakpoint.block(s.Breakpoint.DrawFrom),t.draw()})}export(){const t=this.ext.components[r.SN.Timeline][0];return JSON.parse(JSON.stringify({theme:t.theme,version:r.SN_VERSION,data:{width:t.canvas.width,height:t.canvas.height,timeline:t.drawInfo,runtime:t.runtime,events:t.events.map(t=>({drawInfo:t.drawInfo,bodyDrawInfo:t.body.drawInfo,markDrawInfo:t.mark.drawInfo,axisDrawInfo:t.axis?t.axis.drawInfo:null})),axis:{drawInfo:t.axis.drawInfo,bodyDrawInfo:t.axis.body.drawInfo,scalesDrawInfo:t.axis.scales.map(t=>t.drawInfo),milestonesDrawInfo:t.axis.milestones.map(t=>t.drawInfo)}}}))}initRuntime(t){this.runtime=Object.create(t||Object.prototype),this.runtime.startDate="startDate"in this.runtime?new Date(this.runtime.startDate):this.countStartData(),this.runtime.endDate="endDate"in this.runtime?new Date(this.runtime.endDate):this.countEndData(),this.runtime.milestoneBy="milestoneBy"in this.runtime?this.runtime.milestoneBy:this.countMilestoneBy(),this.runtime.scaleBy="scaleBy"in this.runtime?this.runtime.scaleBy:this.countScaleBy(),this.runtime.axisLength="axisLength"in this.runtime?this.runtime.axisLength:this.countAxisLength(),this.runtime.startDate=new Date(new Date(this.runtime.startDate).getTime()-r.DATE_COUNT_EXTRA[this.runtime.scaleBy||"day"]),this.runtime.endDate=new Date(new Date(this.runtime.endDate).getTime()+r.DATE_COUNT_EXTRA[this.runtime.scaleBy||"day"])}countStartData(){const t=Array.from(this.drawInfo.events).sort((t,e)=>Number(new Date(t.date))-Number(new Date(e.date)));return new Date(t[0].date)}countEndData(){const t=this.drawInfo.events,e=Math.max(...t.map(t=>Number(new Date(t.date)))),n=Math.max(...t.filter(t=>"endDate"in t).map(t=>Number(new Date(t.endDate))))||-1;return new Date(Math.max(e,n))}countMilestoneBy(){const t=new Date(this.runtime.endDate).getTime()-new Date(this.runtime.startDate).getTime();switch(!0){case t>62208e6:return"year";case t>15552e6:return"quarter";case t>5184e6:return"month";case t>12096e5:return"week"}return null}countScaleBy(){switch(this.runtime.milestoneBy){case"year":return"quarter";case"quarter":return"month";case"month":return"week";case"week":return"day"}return null}countAxisLength(){return 500+100*this.drawInfo.events.length}initAxis(){this.axis||(this.axis=new this.axisConstructor(this));const t=this.runtime.startDate.getTime(),e=this.runtime.endDate.getTime(),n=new a.default(t,e),o=e-t;this.axis.drawInfo.length=this.runtime.axisLength,null!==this.runtime.milestoneBy&&(this.axis.drawInfo.milestones=n.split(this.runtime.milestoneBy).map(t=>({position:(e-t.getTime())/o,content:{date:t.toISOString(),by:this.runtime.milestoneBy}}))),null!==this.runtime.scaleBy&&(this.axis.drawInfo.scales=n.split(this.runtime.scaleBy).map(t=>(new Date(this.runtime.endDate).getTime()-t.getTime())/o))}initEvents(){const t=Array.from(this.drawInfo.events).sort((t,e)=>new Date(t.date).getTime()-new Date(e.date).getTime()),e=new Date(this.runtime.endDate).getTime()-new Date(this.runtime.startDate).getTime();for(const n of t){const t=new this.eventConstructor(this);if(t.drawInfo.target={x:this.axis.body.drawInfo.box.x+this.axis.body.drawInfo.box.width/2,y:(new Date(this.runtime.endDate).getTime()-new Date(n.date).getTime())/e},t.drawInfo.date=n.date,t.drawInfo.title=n.title,t.drawInfo.description=n.description,t.drawInfo.folded=Boolean(n.folded),t.drawInfo.foldPlaceholder=n.foldPlaceholder,t.drawInfo.endText=n.endText,n.endDate){const o=new Date("now"===n.endDate?this.runtime.endDate:n.endDate);t.drawInfo.endDate=o.toISOString(),t.drawInfo.axisLength=(o.getTime()-new Date(n.date).getTime())/e}this.events.push(t)}}static is(t){return t.name===r.SN.Timeline}static mount(t,e){const n="string"==typeof t?document.querySelector(t):t;n.innerHTML="",n.classList.add("short-night",e,"container");const o=document.createElement("canvas");return n.classList.add("short-night",e,"canvas"),n.appendChild(o),{container:n,canvas:o}}}h.defaultGrid={eventOffset:{x:20,y:0},minEventAxisOffset:25,markWidth:15,scaleHeight:5,axisWidth:12,axisStart:{x:400,y:10},eventWidth:350,canvasWidth:700},e.default=h},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{d(o.next(t))}catch(t){r(t)}}function a(t){try{d(o.throw(t))}catch(t){r(t)}}function d(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}d((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(3),r=n(0);e.default=class extends i.default{constructor(t){super(t),this.name=r.SN.AxisBody,this.drawInfo={box:{x:0,y:0,width:0,height:0},length:0,width:0,start:{x:0,y:0}},this.ext.onConstruct(this)}createBox(){return this.drawInfo.box={x:this.drawInfo.start.x-this.drawInfo.width/2,y:this.drawInfo.start.y,width:this.drawInfo.width,height:this.drawInfo.length},super.createBox()}apply(){const t=t=>super[t];return o(this,void 0,void 0,function*(){return this.createBox(),t("apply").call(this)})}static is(t){return t.name===r.SN.AxisBody}}},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{d(o.next(t))}catch(t){r(t)}}function a(t){try{d(o.throw(t))}catch(t){r(t)}}function d(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}d((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(3),r=n(0);e.default=class extends i.default{constructor(t){super(t),this.name=r.SN.AxisScale,this.drawInfo={bodyDrawInfo:{},alignY:0,height:0,box:{x:0,y:0,width:0,height:0}},this.ext.onConstruct(this)}createBox(){return this.drawInfo.box={x:this.drawInfo.bodyDrawInfo.box.x,y:this.drawInfo.alignY-this.drawInfo.height/2,height:this.drawInfo.height,width:this.drawInfo.bodyDrawInfo.box.width},super.createBox()}apply(){const t=t=>super[t];return o(this,void 0,void 0,function*(){return this.createBox(),t("apply").call(this)})}static is(t){return t.name===r.SN.AxisScale}}},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{d(o.next(t))}catch(t){r(t)}}function a(t){try{d(o.throw(t))}catch(t){r(t)}}function d(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}d((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(1),r=n(3),s=n(0);e.default=class extends r.default{constructor(t){super(t),this.name=s.SN.AxisMilestone,this.drawInfo={bodyDrawInfo:{},alignY:0,content:"0_o",box:{x:0,y:0,width:0,height:0}},this.ext.onConstruct(this)}formatDate(t,e){const n=t.toDateString().split(" ")[1];switch(e){case"year":return`${t.getFullYear()}`;case"quarter":return`${n}. ${t.getFullYear()}`;case"month":return`${n}.`;case"week":case"day":return`${t.getMonth()+1}.${t.getDate()}`;default:return t.toLocaleString()}}createElement(){const t=super.createElement();this.element.innerHTML="string"==typeof this.drawInfo.content?this.drawInfo.content:this.formatDate(new Date(this.drawInfo.content.date),this.drawInfo.content.by);const{width:e,height:n}=i.parseBox(this.element),o=this.drawInfo.bodyDrawInfo.box.x+this.drawInfo.bodyDrawInfo.box.width/2-e/2,r=this.drawInfo.alignY-n/2;return this.element.style.left=`${o}px`,this.element.style.top=`${r}px`,t}createBox(){return this.drawInfo.box=i.parseBox(this.element),super.createBox()}apply(){const t=t=>super[t];return o(this,void 0,void 0,function*(){return this.createElement(),this.element.style.visibility="hidden",this.createBox(),t("apply").call(this)})}draw(){return this.createElement(),super.draw()}static is(t){return t.name===s.SN.AxisMilestone}}},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{d(o.next(t))}catch(t){r(t)}}function a(t){try{d(o.throw(t))}catch(t){r(t)}}function d(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}d((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(3),r=n(1),s=n(0);e.default=class extends i.default{constructor(t){super(t),this.name=s.SN.Event,this.mark=null,this.body=null,this.axis=null,this.grid=t.grid,this.drawInfo={target:{x:30,y:50},offset:this.grid.eventOffset,date:null,title:null,folded:!1,box:{x:0,y:0,width:500,height:500}},this.ext.onConstruct(this)}createBox(){return this.drawInfo.box=r.mergeBox(this.body.drawInfo.box,this.mark.drawInfo.box),this.axis&&(this.drawInfo.box=r.mergeBox(this.drawInfo.box,this.axis.drawInfo.box)),super.createBox()}apply(){const t=t=>super[t];return o(this,void 0,void 0,function*(){return this.initMark(),yield this.mark.apply(),this.initBody(),yield this.body.apply(),this.initAxis(),this.axis&&(yield this.axis.apply()),this.createBox(),t("apply").call(this)})}draw(){return this.body.draw(),this.axis&&this.axis.draw(),this.mark.draw(),super.draw()}hide(){return this.mark.hide(),this.body.hide(),this.axis&&this.axis.hide(),super.hide()}destroy(){return this.mark.destroy(),this.body.destroy(),this.axis&&this.axis.destroy(),super.destroy()}initMark(){this.mark&&this.mark.destroy(),this.mark=new this.markConstructor(this),this.mark.drawInfo.target=this.drawInfo.target,this.mark.drawInfo.width=this.grid.markWidth,this.mark.drawInfo.height=this.grid.markHeight}initBody(){this.body&&this.body.destroy(),this.body=new this.bodyConstructor(this),this.body.drawInfo.markDrawInfo=r.deepFreeze(this.mark.drawInfo),this.body.drawInfo.maxWidth=this.grid.eventWidth,this.body.drawInfo.date=this.drawInfo.date,this.body.drawInfo.title=this.drawInfo.title,this.body.drawInfo.description=this.drawInfo.description,this.body.drawInfo.folded=this.drawInfo.folded,this.body.drawInfo.foldPlaceholder=this.drawInfo.foldPlaceholder,this.body.drawInfo.offset=Object.assign({},this.drawInfo.offset),this.body.drawInfo.endText=this.drawInfo.endText,this.body.drawInfo.endDate=this.drawInfo.endDate}initAxis(){if(this.axis&&(this.axis.destroy(),this.axis=null),this.drawInfo.axisLength){const t=this.axis||new this.axisConstructor(this);t.drawInfo.axisBodyDrawInfo=r.deepFreeze(this.ext.components[s.SN.Axis][0].drawInfo),t.drawInfo.markDrawInfo=r.deepFreeze(this.mark.drawInfo),t.drawInfo.offsetX=this.grid.minEventAxisOffset,t.drawInfo.length=this.drawInfo.axisLength,t.drawInfo.text=this.drawInfo.endText,this.axis=t}}static is(t){return t.name===s.SN.Event}}},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{d(o.next(t))}catch(t){r(t)}}function a(t){try{d(o.throw(t))}catch(t){r(t)}}function d(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}d((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(3),r=n(0);e.default=class extends i.default{constructor(t){super(t),this.name=r.SN.EventMark,this.drawInfo={axisBodyDrawInfo:{},box:{x:0,y:0,width:0,height:0},target:{x:0,y:0},width:0},this.ext.onConstruct(this)}createBox(){const t=this.drawInfo.width,e=this.drawInfo.height||t;return this.drawInfo.box={width:t,height:e,x:this.drawInfo.target.x-t/2,y:this.drawInfo.target.y-e/2},super.createBox()}apply(){const t=t=>super[t];return o(this,void 0,void 0,function*(){return this.createBox(),t("apply").call(this)})}static is(t){return t.name===r.SN.EventMark}}},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{d(o.next(t))}catch(t){r(t)}}function a(t){try{d(o.throw(t))}catch(t){r(t)}}function d(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}d((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(1),r=n(3),s=n(0);e.default=class extends r.default{constructor(t){super(t),this.name=s.SN.EventAxis,this.drawInfo={axisBodyDrawInfo:{},markDrawInfo:{},length:0,offsetX:0,box:{x:0,y:0,width:0,height:0}},this.ext.onConstruct(this)}createElement(){const t=super.createElement(),e=this.drawInfo.markDrawInfo.target;this.element.classList.add("endText"),this.element.innerHTML=this.drawInfo.text;const n=i.parseBox(this.element);return this.element.style.left=`${e.x+this.drawInfo.offsetX}px`,this.element.style.top=`${e.y-this.drawInfo.length-n.height/2}px`,t}createBox(){const t=this.drawInfo.markDrawInfo.target;return this.drawInfo.box={x:t.x,y:t.y-this.drawInfo.length,width:this.drawInfo.offsetX,height:this.drawInfo.length},super.createBox()}apply(){const t=t=>super[t];return o(this,void 0,void 0,function*(){return this.drawInfo.text?(this.createElement(),this.element.style.visibility="hidden"):this.element&&(this.element.parentNode.removeChild(this.element),delete this.element),this.createBox(),t("apply").call(this)})}draw(){return this.drawInfo.text&&this.createElement(),super.draw()}static is(t){return t.name===s.SN.EventAxis}}},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{d(o.next(t))}catch(t){r(t)}}function a(t){try{d(o.throw(t))}catch(t){r(t)}}function d(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}d((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(1),r=n(3),s=n(0);e.default=class extends r.default{constructor(t){super(t),this.name=s.SN.EventBody,this.element=null,this.drawInfo={markDrawInfo:null,offset:{x:0,y:0},maxWidth:300,date:null,title:"untitled",floated:!1,folded:!1,box:{x:0,y:0,width:0,height:0}},this.ext.onConstruct(this)}createElement(){const t=super.createElement();return this.drawInfo.floated&&this.element.classList.add("floated"),this.drawInfo.folded&&this.element.classList.add("folded"),this.element.innerHTML=`\n            <div class="foldPlaceholder" title="${this.drawInfo.title}">\n                ${this.drawInfo.foldPlaceholder||this.drawInfo.title}\n            </div>\n            <div class="title">${this.drawInfo.title}</div>\n            <div class="date">${new Date(this.drawInfo.date).toLocaleDateString()}</div>\n            <div class="description">${this.drawInfo.description}</div>\n        `,this.drawInfo.description||this.element.removeChild(this.element.querySelector(".description")),this.element.style.maxWidth=`${this.drawInfo.maxWidth}px`,t}createBox(){const t=i.parseBox(this.element),e=Object.assign({width:t.width,height:t.height},this.drawInfo.markDrawInfo.target);return e.x-=e.width,e.y-=e.height/2,e.x-=this.drawInfo.offset.x,e.y+=this.drawInfo.offset.y,this.drawInfo.box=e,super.createBox()}apply(){const t=t=>super[t];return o(this,void 0,void 0,function*(){return this.createElement(),this.createBox(),this.applyBoxToElement(),this.element.style.visibility="hidden",t("apply").call(this)})}draw(){return this.createElement(),this.applyBoxToElement(),super.draw()}applyBoxToElement(){this.element.style.left=`${this.drawInfo.box.x}px`,this.element.style.top=`${this.drawInfo.box.y}px`}static is(t){return t.name===s.SN.EventBody}}},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{d(o.next(t))}catch(t){r(t)}}function a(t){try{d(o.throw(t))}catch(t){r(t)}}function d(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}d((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t){this.etx=t}onApply(t){return o(this,void 0,void 0,function*(){t.extraData.boxElement&&t.extraData.boxElement.parentElement&&t.extraData.boxElement.parentElement.removeChild(t.extraData.boxElement);const e=document.createElement(t.name);e.id=t.extraData.id;for(const[n,o]of Object.entries(t.drawInfo))void 0!==o&&e.setAttribute(n,JSON.stringify(o));Object.assign(e.style,{position:"absolute",left:`${t.drawInfo.box.x}px`,top:`${t.drawInfo.box.y}px`,width:`${t.drawInfo.box.width}px`,height:`${t.drawInfo.box.height}px`,zIndex:2147483647-~~(t.drawInfo.box.width*t.drawInfo.box.height)}),t.container.appendChild(e),t.extraData.boxElement=e})}onDestroy(t){const e=t.extraData.boxElement;e&&e.parentElement&&e.parentElement.removeChild(e)}}},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{d(o.next(t))}catch(t){r(t)}}function a(t){try{d(o.throw(t))}catch(t){r(t)}}function d(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}d((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(0);e.default=class{constructor(t){this.etx=t}onConstruct(t){const e=Number(Math.random().toString().split(".")[1]).toString(36).slice(0,5);Object.defineProperty(t.extraData,"id",{get:()=>`${t.name}_${e}`})}onApply(t){return o(this,void 0,void 0,function*(){i.DEBUG&&(window[t.extraData.id]=t)})}}},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{d(o.next(t))}catch(t){r(t)}}function a(t){try{d(o.throw(t))}catch(t){r(t)}}function d(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}d((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(5),r=n(1),s=n(4),a=n(0),d=n(6);e.default=class{constructor(t){this.etx=t,this.pushConfigs=[]}onApply(t){return o(this,void 0,void 0,function*(){return i.default.is(t)?yield this.adjustAxis(t):d.default.is(t)?yield this.adjustEvent(t):void 0})}onDestroy(t){for(;;){const e=this.pushConfigs.findIndex(e=>e.component===t);if(-1===e)break;this.pushConfigs.splice(e,1)}}adjustAxis(t){return o(this,void 0,void 0,function*(){const e=[t.body,...t.scales,...t.milestones];t.extraData.realLength=t.drawInfo.length-t.milestones.reduce((t,e)=>t+e.drawInfo.box.height,0),t.milestones.forEach(e=>e.drawInfo.alignY*=t.extraData.realLength),t.scales.forEach(e=>e.drawInfo.alignY*=t.extraData.realLength),yield Promise.all([...t.milestones,...t.scales].map(t=>t.apply())),t.milestones.forEach(t=>this.addPushConfig({critical:t.drawInfo.box.y,additional:t.drawInfo.box.height,component:t})),yield this.etx.breakpoint.block(s.Breakpoint.PushScalesAndMilestones,{components:e});const n=[...t.milestones,...t.scales].sort((t,e)=>t.drawInfo.alignY-e.drawInfo.alignY);for(const t of n){const o=this.countCritical(t.drawInfo.alignY);0!==o&&(t.name===a.SN.AxisMilestone&&(yield Promise.all(n.map(t=>t.apply())),yield this.etx.breakpoint.block(s.Breakpoint.PushScalesAndMilestones,{components:e})),t.drawInfo.alignY+=o)}yield Promise.all(n.map(t=>t.apply())),yield this.etx.breakpoint.block(s.Breakpoint.PushScalesAndMilestones,{components:e}),yield Promise.all(e.map(t=>t.apply())),t.drawInfo.box=r.mergeBox(...e.map(t=>t.drawInfo.box))})}adjustEvent(t){return o(this,void 0,void 0,function*(){const e=t.events,n=this.etx.components[a.SN.Axis][0];for(const t of e)t.drawInfo.target.y*=n.extraData.realLength,t.drawInfo.target.y+=n.body.drawInfo.box.y,t.drawInfo.target.y+=this.countCritical(t.drawInfo.target.y),t.drawInfo.axisLength&&(t.drawInfo.axisLength*=n.extraData.realLength,t.drawInfo.axisLength+=this.countCritical(t.drawInfo.target.y));yield Promise.all(e.map(t=>t.apply()))})}addPushConfig(t){this.pushConfigs.push(t)}countCritical(t){return 0===this.pushConfigs.length?t:this.pushConfigs.reduce((e,n)=>t>n.critical?e+n.additional:e,0)}}},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{d(o.next(t))}catch(t){r(t)}}function a(t){try{d(o.throw(t))}catch(t){r(t)}}function d(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}d((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(0),r=n(6),s=n(1),a=n(27),d=n(28),h=n(29),c=n(30);e.default=class{constructor(t){this.ext=t,this.fixers=[new a.default(this.ext),new d.default(this.ext),new h.default(this.ext),new c.default(this.ext)],this.counter=0}onApply(t){return o(this,void 0,void 0,function*(){if(r.default.is(t))if("no-conflict"!==(yield this.fixAll())){if(this.counter++,this.counter>10){const t=`Too many times(${this.counter}) of try fix conflict.`;if(i.DEBUG)throw new Error(t);console.warn(t)}yield Promise.resolve().then(()=>t.apply({axisLength:1.1*t.runtime.axisLength}))}else this.counter=0})}fixAll(){return o(this,void 0,void 0,function*(){return yield s.walkLoop(()=>o(this,void 0,void 0,function*(){const t=[];for(const e of this.fixers)t.push(yield e.fix());return t}))})}}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"==typeof btoa){var i=(s=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),r=o.sources.map(function(t){return"/*# sourceURL="+o.sourceRoot+t+" */"});return[n].concat(r).concat([i]).join("\n")}var s;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(o[r]=!0)}for(i=0;i<t.length;i++){var s=t[i];"number"==typeof s[0]&&o[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(t,e,n){var o,i,r={},s=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=o.apply(this,arguments)),i}),a=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var o=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,n);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(t){o=null}e[t]=o}return e[t]}}(),d=null,h=0,c=[],f=n(21);function l(t,e){for(var n=0;n<t.length;n++){var o=t[n],i=r[o.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](o.parts[s]);for(;s<o.parts.length;s++)i.parts.push(m(o.parts[s],e))}else{var a=[];for(s=0;s<o.parts.length;s++)a.push(m(o.parts[s],e));r[o.id]={id:o.id,refs:1,parts:a}}}}function u(t,e){for(var n=[],o={},i=0;i<t.length;i++){var r=t[i],s=e.base?r[0]+e.base:r[0],a={css:r[1],media:r[2],sourceMap:r[3]};o[s]?o[s].parts.push(a):n.push(o[s]={id:s,parts:[a]})}return n}function w(t,e){var n=a(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=c[c.length-1];if("top"===t.insertAt)o?o.nextSibling?n.insertBefore(e,o.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),c.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=a(t.insertAt.before,n);n.insertBefore(e,i)}}function p(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=c.indexOf(t);e>=0&&c.splice(e,1)}function x(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var o=function(){0;return n.nc}();o&&(t.attrs.nonce=o)}return y(e,t.attrs),w(t,e),e}function y(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function m(t,e){var n,o,i,r;if(e.transform&&t.css){if(!(r="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=r}if(e.singleton){var s=h++;n=d||(d=x(e)),o=b.bind(null,n,s,!1),i=b.bind(null,n,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",y(e,t.attrs),w(t,e),e}(e),o=function(t,e,n){var o=n.css,i=n.sourceMap,r=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||r)&&(o=f(o));i&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([o],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,n,e),i=function(){p(n),n.href&&URL.revokeObjectURL(n.href)}):(n=x(e),o=function(t,e){var n=e.css,o=e.media;o&&t.setAttribute("media",o);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){p(n)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=s()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=u(t,e);return l(n,e),function(t){for(var o=[],i=0;i<n.length;i++){var s=n[i];(a=r[s.id]).refs--,o.push(a)}t&&l(u(t,e),e);for(i=0;i<o.length;i++){var a;if(0===(a=o[i]).refs){for(var d=0;d<a.parts.length;d++)a.parts[d]();delete r[a.id]}}}};var v,g=(v=[],function(t,e){return v[t]=e,v.filter(Boolean).join("\n")});function b(t,e,n,o){var i=n?"":o.css;if(t.styleSheet)t.styleSheet.cssText=g(e,i);else{var r=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}},function(t,e,n){"use strict";n.r(e),n.d(e,"Base",function(){return S}),n.d(e,"ExtensionManager",function(){return P});var o=n(0),i=n(5),r=n.n(i),s=n(7),a=n.n(s),d=n(8),h=n.n(d),c=n(9),f=n.n(c),l=n(10),u=n.n(l),w=n(13),p=n.n(w),x=n(11),y=n.n(x),m=n(12),v=n.n(m),g=n(14),b=n.n(g);n.d(e,"BoxElementGenerator",function(){return b.a});var I=n(15),E=n.n(I);n.d(e,"GeneratorId",function(){return E.a});var D=n(16),k=n.n(D);n.d(e,"PositionCounter",function(){return k.a});var B=n(4),_=n.n(B);n.d(e,"BreakpointAnimation",function(){return _.a});var M=n(17),A=n.n(M);n.d(e,"ConflictFixer",function(){return A.a});class S{constructor(t){this.etx=t}onConstruct(t){this.etx.components[t.name].push(t)}onDestroy(t){this.etx.components[t.name].splice(this.etx.components[t.name].indexOf(t),1)}}function P({breakpointAnimation:t}={}){this.extraData={},this.components={[o.SN.Timeline]:[],[o.SN.Axis]:[],[o.SN.AxisBody]:[],[o.SN.AxisScale]:[],[o.SN.AxisMilestone]:[],[o.SN.Event]:[],[o.SN.EventBody]:[],[o.SN.EventMark]:[],[o.SN.EventAxis]:[]},this.breakpoint=new _.a(this,t),this.extensions=[new S(this),new E.a(this),new k.a(this),new A.a(this),this.breakpoint],o.DEBUG&&this.extensions.push(new b.a(this))}P.prototype.getParent=function(t){if(r.a.is(t))return this.components[o.SN.Timeline][0];if(u.a.is(t))return this.components[o.SN.Timeline][0];if(a.a.is(t))return this.components[o.SN.Axis][0];if(f.a.is(t))return this.components[o.SN.Axis][0];if(h.a.is(t))return this.components[o.SN.Axis][0];if(p.a.is(t))return this.components[o.SN.Event].find(e=>e.body===t);if(v.a.is(t))return this.components[o.SN.Event].find(e=>e.axis===t);if(y.a.is(t))return this.components[o.SN.Event].find(e=>e.mark===t);throw new TypeError(`Cannot find parent of ${t.constructor.name}`)},["onConstruct","onApply","onDestroy","onHide","onDraw"].forEach(t=>{P.prototype[t]=async function(...e){for(const n of this.extensions)t in n&&("onApply"===t?await n[t](...e):n[t](...e))}})},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,o=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,r=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?t:(i=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:o+r.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(t){t.exports={name:"short-night",version:"0.0.1",description:"An engine for drawing timeline graph.",types:"src/engine/index.ts",scripts:{"fix-lint":"eslint src/**/*.js --fix && tslint --project tsconfig.json --fix",eslint:"eslint src/**/*.js",tslint:"tslint --project tsconfig.json",build:"cross-env NODE_ENV=production webpack --mode production",test:"npm run eslint && npm run tslint && tsc",dev:"cross-env NODE_ENV=development webpack --mode development --watch"},repository:{type:"git",url:"git+https://github.com/FoXZilla/short-night.git"},keywords:["shortnight","short-night","timeline"],author:"FoXZilla, pea3nut",license:"MIT",bugs:{url:"https://github.com/FoXZilla/short-night/issues"},homepage:"https://github.com/pea3nut/short-night#readme",devDependencies:{"@types/moveto":"^1.7.0","cross-env":"^5.2.0","css-loader":"^1.0.0",eslint:"^5.10.0","eslint-config-airbnb-base":"^13.1.0","eslint-import-resolver-alias":"^1.1.2","eslint-loader":"^2.1.1","eslint-plugin-import":"^2.14.0","node-sass":"^4.9.3","sass-loader":"^7.1.0","style-loader":"^0.23.0",tinytime:"^0.2.6","ts-loader":"^4.4.2",tslint:"^5.11.0","tslint-config-airbnb":"^5.11.1","tslint-loader":"^3.5.4","tslint-webpack-plugin":"^1.3.0",typescript:"^2.9.2",webpack:"^4.16.0","webpack-cli":"^3.0.8"},dependencies:{moveto:"^1.7.4",roughjs:"^2.2.5"}}},function(t,e,n){var o=n(24);"string"==typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(19)(o,i);o.locals&&(t.exports=o.locals)},function(t,e,n){(t.exports=n(18)(!1)).push([t.i,".short-night {\n  position: relative;\n  box-sizing: border-box; }\n  .short-night {\n    margin: 0;\n    padding: 0; }\n  .short-night.axis_milestone {\n    font-family: sans-serif;\n    position: absolute;\n    padding: 5px 10px; }\n  .short-night.event_body {\n    position: absolute;\n    color: #000;\n    padding: 7px 10px 7px 5px;\n    text-align: right; }\n    .short-night.event_body.folded {\n      cursor: pointer; }\n      .short-night.event_body.folded .title, .short-night.event_body.folded .foldPlaceholder {\n        display: none; }\n      .short-night.event_body.folded .foldPlaceholder {\n        display: block; }\n    .short-night.event_body .title, .short-night.event_body .foldPlaceholder {\n      font-size: 1em;\n      text-overflow: ellipsis;\n      white-space: nowrap; }\n    .short-night.event_body .date {\n      font-size: 0.6em;\n      font-weight: normal;\n      font-style: italic; }\n    .short-night.event_body .foldPlaceholder {\n      display: none; }\n  .short-night.event_axis.endText {\n    position: absolute;\n    padding: 0 0 2px 3px;\n    font-size: 0.8em;\n    text-indent: 0.5em; }\n",""])},function(t,e,n){"use strict";
/*!
 * MoveTo - A lightweight scroll animation javascript library without any dependency.
 * Version 1.7.4 (28-09-2018 16:02)
 * Licensed under MIT
 * Copyright 2018 Hasan AydoÄŸdu <hsnaydd@gmail.com>
 */var o=function(){var t={tolerance:0,duration:800,easing:"easeOutQuart",callback:function(){}};function e(t,e,n,o){return t/=o,-n*(--t*t*t*t-1)+e}function n(t,e){var n={};return Object.keys(t).forEach(function(e){n[e]=t[e]}),Object.keys(e).forEach(function(t){n[t]=e[t]}),n}function o(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.options=n(t,o),this.easeFunctions=n({easeOutQuart:e},i)}return o.prototype.registerTrigger=function(t,e){var o=this;if(t){var i=t.getAttribute("href")||t.getAttribute("data-target"),r=i&&"#"!==i?document.getElementById(i.substring(1)):document.body,s=n(this.options,function(t,e){var n={};return Object.keys(e).forEach(function(e){var o=t.getAttribute("data-mt-"+e.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()}));o&&(n[e]=isNaN(o)?o:parseInt(o,10))}),n}(t,this.options));"function"==typeof e&&(s.callback=e);var a=function(t){t.preventDefault(),o.move(r,s)};return t.addEventListener("click",a,!1),function(){return t.removeEventListener("click",a,!1)}}},o.prototype.move=function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===t||t){o=n(this.options,o);var i="number"==typeof t?t:t.getBoundingClientRect().top,r=window.pageYOffset,s=null,a=void 0;i-=o.tolerance;window.requestAnimationFrame(function n(d){var h=window.pageYOffset;s||(s=d-1);var c=d-s;if(a&&(i>0&&a>h||i<0&&a<h))return o.callback(t);a=h;var f=e.easeFunctions[o.easing](c,r,i,o.duration);window.scroll(0,f),c<o.duration?window.requestAnimationFrame(n):(window.scroll(0,i+r),o.callback(t))})}},o.prototype.addEaseFunction=function(t,e){this.easeFunctions[t]=e},o}();t.exports=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class o{constructor(t,e){this.bigger=+new Date(t)>+new Date(e)?new Date(t):new Date(e),this.smaller=+new Date(t)<=+new Date(e)?new Date(t):new Date(e)}split(t,e){const n=[],i=new Date(this.smaller);for(;+o.increment[t](i,e)<+this.bigger;)n.push(new Date(i));return n}}o.increment={year:(t,e=1)=>(t.setMonth(0,1),t.setHours(0,0,0,1),t.setFullYear(t.getFullYear()+e),t),quarter:t=>(t.setMonth(3*~~(t.getMonth()/3),1),t.setHours(0,0,0,1),t.getMonth()+3>=12?(t.setFullYear(t.getFullYear()+1),t.setMonth(0,1)):t.setMonth(t.getMonth()+3,1),t),month:t=>(t.setDate(1),t.setHours(0,0,0,1),11===t.getMonth()?(t.setFullYear(t.getFullYear()+1),t.setMonth(0,1)):t.setMonth(t.getMonth()+1,1),t),week(t){t.setHours(0,0,0,1);do{t.setTime(t.getTime()+864e5)}while(1!==t.getDay());return t},day:t=>(t.setHours(0,0,0,1),t.setTime(t.getTime()+864e5),t)},e.default=o},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{d(o.next(t))}catch(t){r(t)}}function a(t){try{d(o.throw(t))}catch(t){r(t)}}function d(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}d((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(0),r=n(1),s=n(4);e.default=class{constructor(t){this.ext=t}fix(){return o(this,void 0,void 0,function*(){const t=this.ext.components[i.SN.EventBody],e=this.ext.components[i.SN.AxisMilestone];for(const n of t)for(const t of e)if(r.isOverlap(n.drawInfo.box,t.drawInfo.box)){const e={protagonist:t,components:[...this.ext.components[i.SN.AxisBody],t,n]};yield this.ext.breakpoint.block(s.Breakpoint.FixEventBody2AxisMilestone,e),n.drawInfo.offset.x=t.drawInfo.box.width/2+1,yield n.apply(),yield this.ext.breakpoint.block(s.Breakpoint.FixEventBody2AxisMilestone,Object.assign({},e,{forward:!0}))}return"no-conflict"})}}},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{d(o.next(t))}catch(t){r(t)}}function a(t){try{d(o.throw(t))}catch(t){r(t)}}function d(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}d((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(0),r=n(1),s=n(4);class a{constructor(t){this.ext=t}fix(){return o(this,void 0,void 0,function*(){const t=Array.from(this.ext.components[i.SN.EventAxis]).sort((t,e)=>e.drawInfo.length-t.drawInfo.length);for(;t.some(e=>t.some(t=>a.isConflict(e,t)));)for(const e of t){const n=t.filter(t=>a.isConflict(e,t));if(n.length){const t={protagonist:e,components:[...this.ext.components[i.SN.AxisBody],this.ext.getParent(e),...n.map(t=>this.ext.getParent(t))]};yield this.ext.breakpoint.block(s.Breakpoint.FixEventAxis2EventAxis,t),e.drawInfo.offsetX+=15,yield e.apply(),yield this.ext.breakpoint.block(s.Breakpoint.FixEventAxis2EventAxis,Object.assign({},t,{forward:!0}));break}}return"no-conflict"})}static isConflict(t,e){if(t===e)return!1;const n={startX:t.drawInfo.markDrawInfo.target.x+t.drawInfo.offsetX,startY:t.drawInfo.markDrawInfo.target.y,endX:t.drawInfo.markDrawInfo.target.x+t.drawInfo.offsetX,endY:t.drawInfo.markDrawInfo.target.y-t.drawInfo.length},o={startX:e.drawInfo.markDrawInfo.target.x+e.drawInfo.offsetX,startY:e.drawInfo.markDrawInfo.target.y,endX:e.drawInfo.markDrawInfo.target.x+e.drawInfo.offsetX,endY:e.drawInfo.markDrawInfo.target.y-e.drawInfo.length};return r.isIntersecting(n,o)}}e.default=a},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{d(o.next(t))}catch(t){r(t)}}function a(t){try{d(o.throw(t))}catch(t){r(t)}}function d(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}d((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(1),r=n(0),s=n(4);class a{constructor(t){this.ext=t,this.conflicts=[],this.eventBodyList=[],this.spaceMap=new Map}static avoid({mover:t,fixed:e,direction:n}){return o(this,void 0,void 0,function*(){n>0?t.drawInfo.offset.y+=e.drawInfo.box.y+e.drawInfo.box.height-t.drawInfo.box.y+1:t.drawInfo.offset.y-=t.drawInfo.box.y+t.drawInfo.box.height-e.drawInfo.box.y+1,yield t.apply()})}static isConflict(t,e){if(t===e)return!1;if(t.drawInfo.floated!==e.drawInfo.floated){const n=t.drawInfo.floated?t:e,o=t===n?e:t;if(n.drawInfo.markDrawInfo.target.y>o.drawInfo.box.y&&n.drawInfo.markDrawInfo.target.y<o.drawInfo.box.y+o.drawInfo.box.height)return!0}return i.isOverlap(t.drawInfo.box,e.drawInfo.box)}fix(){return o(this,void 0,void 0,function*(){return this.eventBodyList=Array.from(this.ext.components[r.SN.EventBody]).sort((t,e)=>t.drawInfo.markDrawInfo.target.y-e.drawInfo.markDrawInfo.target.y),yield i.walkLoop(()=>o(this,void 0,void 0,function*(){return[yield this.tryFixOne()]}))})}tryFixOne(){return o(this,void 0,void 0,function*(){if(yield this.countConflict(),this.countSpace(),0===this.conflicts.length)return"no-conflict";if(this.conflicts=this.conflicts.filter(t=>this.isPossible(t)),0===this.conflicts.length)return"failed";const t=this.conflicts.find(t=>this.conflicts.every(e=>this.countCast(t)<=this.countCast(e))),e={components:[...this.ext.components[r.SN.AxisBody],t.self,...t.with],protagonist:t.self};return yield this.ext.breakpoint.block(s.Breakpoint.FixEventBody2EventBodyMover,e),yield this.fixConflict(t),yield this.ext.breakpoint.block(s.Breakpoint.FixEventBody2EventBodyMover,Object.assign({},e,{forward:!0})),"alleviated"})}isPossible(t){if(t.self.drawInfo.floated&&t.with.some(t=>!t.drawInfo.floated))return!1;const e=this.countNeeded(t),n=this.spaceMap.get(t.self);return(0===e.bottom||0===e.top)&&n.bottom>=e.bottom&&n.top>=e.top}fixConflict(t){return o(this,void 0,void 0,function*(){const e=this.countNeeded(t),n=e.top?e.top:-e.bottom,o=n/Math.abs(n);t.self.drawInfo.offset.y+=n,yield t.self.apply();const i=this.eventBodyList.filter(e=>e.drawInfo.floated===t.self.drawInfo.floated);for(let e=i.indexOf(t.self)+o;e>=0&&e<i.length;e+=o){const t=i[e-o],n=i[e];if(!a.isConflict(t,n))break;yield a.avoid({direction:o,mover:n,fixed:t})}})}countConflict(){return o(this,void 0,void 0,function*(){this.conflicts.length=0,yield Promise.all(this.eventBodyList.map(t=>t.apply()));for(const t of this.eventBodyList){const e={self:t,with:this.eventBodyList.filter(e=>a.isConflict(t,e))};e.with.length&&this.conflicts.push(e)}})}countCast(t){const e=this.countNeeded(t);return e.bottom+e.top}countNeeded(t){const e=t.self,n={top:0,bottom:0},o=t.with.filter(t=>t.drawInfo.markDrawInfo.target.y<e.drawInfo.markDrawInfo.target.y),i=t.with.filter(t=>t.drawInfo.markDrawInfo.target.y>e.drawInfo.markDrawInfo.target.y);return o.length&&(n.top=Math.max(...o.map(t=>{if(t.drawInfo.floated===e.drawInfo.floated)return t.drawInfo.box.y+t.drawInfo.box.height-e.drawInfo.box.y;if(e.drawInfo.floated)return t.drawInfo.box.y+t.drawInfo.box.height-e.drawInfo.markDrawInfo.target.y;if(t.drawInfo.floated)return t.drawInfo.markDrawInfo.target.y-e.drawInfo.box.y;throw SyntaxError("floated is not a boolean")}))),i.length&&(n.bottom=Math.max(...i.map(t=>{if(t.drawInfo.floated===e.drawInfo.floated)return e.drawInfo.box.y+e.drawInfo.box.height-t.drawInfo.box.y;if(e.drawInfo.floated)return e.drawInfo.markDrawInfo.target.y-t.drawInfo.box.y;if(t.drawInfo.floated)return e.drawInfo.box.y+e.drawInfo.box.height-t.drawInfo.markDrawInfo.target.y;throw SyntaxError("floated is not a boolean")}))),n.top&&n.top++,n.bottom&&n.bottom++,e.extraData.needed=n,n}countSpace(){this.eventBodyList.forEach(t=>this.spaceMap.set(t,{top:t.drawInfo.markDrawInfo.target.y-t.drawInfo.box.y-4,bottom:t.drawInfo.box.y+t.drawInfo.box.height-t.drawInfo.markDrawInfo.target.y-4}));const t=t=>{if(0===t.length)return;const e=t[0];this.spaceMap.get(e).bottom=Math.min(this.spaceMap.get(e).bottom,e.drawInfo.box.y);const n=t[t.length-1];this.spaceMap.get(n).top=Math.min(this.spaceMap.get(n).top,n.canvas.height-(n.drawInfo.box.y+n.drawInfo.box.height));for(let e=1;e<t.length;e++){const n=t[e-1],o=t[e],i=this.spaceMap.get(o),r=this.spaceMap.get(n),s=o.drawInfo.box.y-(n.drawInfo.box.y+n.drawInfo.box.height);i.bottom=Math.min(i.bottom,s+r.bottom)}for(let e=t.length-2;e>=0;e--){const n=t[e+1],o=t[e],i=this.spaceMap.get(o),r=this.spaceMap.get(n),s=n.drawInfo.box.y-(o.drawInfo.box.y+o.drawInfo.box.height);i.top=Math.min(i.top,s+r.top)}Array.from(this.spaceMap.values()).forEach(t=>{t.top=Math.max(0,t.top),t.bottom=Math.max(0,t.bottom)})};t(this.eventBodyList.filter(t=>t.drawInfo.floated)),t(this.eventBodyList.filter(t=>!t.drawInfo.floated)),this.eventBodyList.forEach(t=>t.extraData.space=this.spaceMap.get(t))}}e.default=a},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{d(o.next(t))}catch(t){r(t)}}function a(t){try{d(o.throw(t))}catch(t){r(t)}}function d(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}d((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(0),r=n(1),s=n(4);class a{constructor(t){this.ext=t,this.conflicts=[],this.eventBodyList=[]}static isConflict(t,e){return t!==e&&(!t.drawInfo.floated&&!e.drawInfo.floated&&r.isOverlap(t.drawInfo.box,e.drawInfo.box))}float(t){return o(this,void 0,void 0,function*(){const e=Math.max(...t.with.map(t=>t.drawInfo.box.width+t.drawInfo.offset.x));t.self.drawInfo.offset.x=e+1,t.self.drawInfo.maxWidth=Math.min(this.timeline.grid.eventWidth,this.axisBody.drawInfo.box.x-e),t.self.drawInfo.floated=!0,yield t.self.apply()})}fix(){return o(this,void 0,void 0,function*(){if(this.timeline=this.ext.components[i.SN.Timeline][0],this.axisBody=this.ext.components[i.SN.AxisBody][0],this.eventBodyList=Array.from(this.ext.components[i.SN.EventBody]).sort((t,e)=>t.drawInfo.markDrawInfo.target.y-e.drawInfo.markDrawInfo.target.y),this.countConflict(),0===this.conflicts.length)return"no-conflict";const t=this.pickRingleader(),e={components:[this.axisBody,t.self,...t.with],protagonist:t.self};return yield this.ext.breakpoint.block(s.Breakpoint.FixEventBody2EventBodyFloater,e),yield this.float(t),yield this.ext.breakpoint.block(s.Breakpoint.FixEventBody2EventBodyFloater,Object.assign({},e,{forward:!0})),"alleviated"})}pickRingleader(){return this.conflicts.find(t=>this.conflicts.every(e=>t.with.length>=e.with.length))}countConflict(){this.conflicts.length=0;for(const t of this.eventBodyList){const e={self:t,with:this.ext.components[i.SN.EventBody].filter(e=>a.isConflict(t,e))};e.with.length&&this.conflicts.push(e)}}}e.default=a},,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(2),i=n(41),r=n(42),s=n(43);e.default=class extends o.Axis{constructor(){super(...arguments),this.theme="rules",this.milestones=[],this.bodyConstructor=i.default,this.milestoneConstructor=r.default,this.scaleConstructor=s.default}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(2);e.default=class extends o.AxisBody{constructor(){super(...arguments),this.theme="rules"}draw(){const t=this.drawInfo.box,e=this.canvas.getContext("2d");return e.beginPath(),e.lineWidth=t.width,e.setLineDash([t.width,10*t.width/3]),e.moveTo(t.x+t.width/2,t.y),e.lineTo(t.x+t.width/2,t.y+t.height),e.strokeStyle="#afafaf",e.stroke(),super.draw()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(2),i=n(1);e.default=class extends o.AxisMilestone{constructor(){super(...arguments),this.theme="rules"}createElement(){const t=super.createElement(),e=parseFloat(getComputedStyle(this.element).paddingLeft),n=this.drawInfo.bodyDrawInfo.box.width;this.element.style.paddingLeft=`${e+n}px`;const o=i.parseBox(this.element);return this.element.style.left=`${o.x+o.width/2-n-22.5-5}px`,t}draw(){const t=this.drawInfo.box,e=this.canvas.getContext("2d");return e.beginPath(),e.lineWidth=1.5,e.setLineDash([]),e.moveTo(t.x,t.y+t.height/2),e.lineTo(t.x+22.5,t.y+t.height/2),e.strokeStyle="#bcbcbc",e.stroke(),super.draw()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(2);e.default=class extends o.AxisScale{constructor(){super(...arguments),this.theme="rules"}createBox(){const t=super.createBox();return this.drawInfo.box={width:10,x:this.drawInfo.bodyDrawInfo.box.x-10-5,y:this.drawInfo.alignY-this.drawInfo.height/2,height:this.drawInfo.height},t}draw(){const t=this.drawInfo.box,e=this.canvas.getContext("2d");return e.beginPath(),e.lineWidth=this.drawInfo.box.height,e.setLineDash([]),e.moveTo(t.x,t.y),e.lineTo(t.x+t.width,t.y),e.strokeStyle="#bcbcbc",e.stroke(),super.draw()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(2),i=n(45),r=n(46),s=n(0);e.default=class extends o.Event{constructor(){super(...arguments),this.theme="rules",this.body=null,this.bodyConstructor=i.default,this.axisConstructor=r.default,this.markConstructor=o.EventMark}initAxis(){const t=this.ext.components[s.SN.AxisBody][0].drawInfo;this.grid.minEventAxisOffset=Math.max(...this.ext.components[s.SN.AxisMilestone].map(e=>e.drawInfo.box.x+e.drawInfo.box.width-(t.box.x-t.width/2))),super.initAxis()}initBody(){super.initBody(),this.body.drawInfo.originOffsetX=this.grid.eventOffset.x}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(2),i=n(60);e.default=class extends o.EventBody{constructor(){super(...arguments),this.theme="rules",this.drawInfo=Object.assign({},this.drawInfo,{mainColor:""})}createElement(){const t=super.createElement(),e=i("{YYYY}.{Mo}",{padMonth:!0}),n=this.element.querySelector(".date");return n.innerHTML=e.render(new Date(this.drawInfo.date)),this.drawInfo.endDate&&(n.innerHTML+=`-${e.render(new Date(this.drawInfo.endDate))}`),t}draw(){const t=this.canvas.getContext("2d"),e=this.drawInfo.box;t.shadowColor="rgba(0, 0, 0, 0.04)",t.shadowBlur=15,t.shadowOffsetY=5,t.shadowOffsetX=5;const n=6,o=7.5,i=e.x+e.width-5-5-n;t.beginPath(),t.setLineDash([]),t.fillStyle="#ffffff",t.moveTo(e.x,e.y),t.lineTo(i,e.y),t.lineTo(i,e.y+(e.height/2+this.drawInfo.offset.y)-o/2),t.lineTo(i+n,e.y+(e.height/2+this.drawInfo.offset.y)),t.lineTo(i,e.y+(e.height/2+this.drawInfo.offset.y)+o/2),t.lineTo(i,e.y+e.height),t.lineTo(e.x,e.y+e.height),t.closePath(),t.fill();const r={x:i+n+5+1.25,y:e.y+(e.height/2+this.drawInfo.offset.y)},s={x:i+n+5+1.25+(this.drawInfo.offset.x-this.drawInfo.originOffsetX),y:e.y+(e.height/2+this.drawInfo.offset.y)};return this.drawInfo.floated&&(t.beginPath(),t.arc(s.x,s.y,2.5,0,2*Math.PI),t.fillStyle=this.drawInfo.mainColor,t.fill(),t.beginPath(),t.lineWidth=1.5,t.moveTo(r.x,r.y),t.lineTo(s.x,s.y),t.strokeStyle=this.drawInfo.mainColor,t.stroke()),t.shadowColor="",t.beginPath(),t.arc(r.x,r.y,2.5,0,2*Math.PI),t.fillStyle=this.drawInfo.mainColor,t.fill(),t.beginPath(),t.lineWidth=4,t.strokeStyle=this.drawInfo.mainColor,t.moveTo(e.x+2,e.y),t.lineTo(e.x+2,e.y+e.height),t.stroke(),super.draw()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(2);e.default=class extends o.EventAxis{constructor(){super(...arguments),this.theme="rules",this.drawInfo=Object.assign({},this.drawInfo,{mainColor:""})}createElement(){const t=super.createElement();return this.element.style.color=this.drawInfo.mainColor,t}draw(){const t=this.drawInfo.text?3:0,e=this.canvas.getContext("2d");return e.beginPath(),e.setLineDash([]),e.lineWidth=3,e.setLineDash([]),e.moveTo(this.drawInfo.markDrawInfo.target.x+this.drawInfo.offsetX,this.drawInfo.markDrawInfo.target.y),e.lineTo(this.drawInfo.markDrawInfo.target.x+this.drawInfo.offsetX,this.drawInfo.markDrawInfo.target.y-this.drawInfo.length+t/2),e.strokeStyle=this.drawInfo.mainColor,e.stroke(),e.beginPath(),e.arc(this.drawInfo.markDrawInfo.target.x+this.drawInfo.offsetX,this.drawInfo.markDrawInfo.target.y-this.drawInfo.length,t,0,2*Math.PI),e.fillStyle=this.drawInfo.mainColor,e.fill(),super.draw()}}},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{d(o.next(t))}catch(t){r(t)}}function a(t){try{d(o.throw(t))}catch(t){r(t)}}function d(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}d((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(2);e.default=class{constructor(t){this.etx=t,this.colors=["#c283ca","#6280c3","#f6d53b","#959595","#e96060","#adcb6d","#7abbe0","#e89235"],this.startIndex=Math.floor(3*Math.random())}onApply(t){return o(this,void 0,void 0,function*(){i.Timeline.is(t)&&this.createColorIntoEvent(t),(i.EventBody.is(t)||i.EventMark.is(t)||i.EventAxis.is(t))&&this.setColorIntoDrawInfo(t)})}onConstruct(t){i.Event.is(t)&&(t.extraData.mainColor=this.getColor())}getColor(){return this.startIndex++,this.startIndex%=this.colors.length,this.colors[this.startIndex]}setColorIntoDrawInfo(t){const e=this.etx;Object.defineProperty(t.drawInfo,"mainColor",{get:()=>e.getParent(t).extraData.mainColor})}createColorIntoEvent(t){for(let e=0;e<t.events.length;e++)t.events[e].extraData.mainColor=this.getColor()}}},,,,,,,function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{d(o.next(t))}catch(t){r(t)}}function a(t){try{d(o.throw(t))}catch(t){r(t)}}function d(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}d((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(55),r=[{date:"2014-5",title:"å¼€å§‹ è‡ªå­¦Webå¼€å‘"},{title:"å…¥å­¦ é’å²›ç†å·¥å¤§å­¦",date:"2014-9-1",endDate:"2018-7-29"},{date:"2014-12",title:"é’ç†Webå¼€å‘åä¼š",text:"åˆ›å»ºé’ç†Webå¼€å‘åä¼šï¼Œæ‹…å½“ä¼šé•¿",endDate:"2016-6",endText:"åä¼šæ¢å±Š"},{date:"2015-6",title:"æ³¨å†Œ é’å²›å“ç„¶ç‹¬ç«‹ç½‘ç»œç§‘æŠ€æœ‰é™å…¬å¸",endDate:"2017-6-19"},{title:"360å‰ç«¯æ˜Ÿè®¡åˆ’",text:"ã€Š360å‰ç«¯æ˜Ÿè®¡åˆ’ã€‹ç”±360å‰ç«¯å›¢é˜Ÿå’Œæ ¡å›­æ‹›è˜å›¢é˜ŸåˆåŠžï¼Œé¢å‘åœ¨æ ¡å¤§å­¦ç”Ÿï¼Œä¸ºåŸ¹å…»æœ€ä¼˜ç§€æœ€æœ‰æ½œåŠ›çš„å‰ç«¯äººæ‰ä¸¾åŠžçš„å‰ç«¯æŠ€æœ¯ç³»åˆ—è¯¾ç¨‹",date:"2017-4-9",endDate:"2017-4-14",folded:!0},{title:"Mozilla å®žä¹ ",date:"2017-7-14",endDate:"2018-2-9"},{title:"ç™¾åº¦ KITT.AI å®žä¹ ",date:"2018-3-21",endDate:"2018-5-28",endText:"Team è¢«è§£æ•£"},{title:"KITT.AI å›¢é˜Ÿ 2å€ç®€å•å¥–",date:"2018-6-29"},{title:"ç™¾åº¦ SWAN å›¢é˜Ÿ",date:"2018-7-4",endDate:"now"},{title:"Mozilla å®žä¹  123",date:"2017-9-10"},{title:"Mozilla å®žä¹  233",date:"2017-8-10"},{title:"2015-7-25",date:"2015-7-25"},{title:"2015-1",date:"2015-1"},{title:"2015-5",date:"2015-5-1"}];document.addEventListener("DOMContentLoaded",()=>o(this,void 0,void 0,function*(){const t=yield i.draw("#app",r);yield new Promise(t=>setTimeout(t,500)),t.hide();const e=yield i.drawWithAnimation("#app",r);yield new Promise(t=>setTimeout(t,500)),e.hide(),yield i.drawFrom("#app",t.export())}))},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{d(o.next(t))}catch(t){r(t)}}function a(t){try{d(o.throw(t))}catch(t){r(t)}}function d(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}d((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(56);e.draw=function(t,e){return o(this,void 0,void 0,function*(){const{container:n,canvas:o}=i.Timeline.mount(t,"rules"),r=new i.Timeline({canvas:o,container:n});return r.drawInfo.events=e,yield r.apply(),r.draw(),r})},e.drawWithAnimation=function(t,e){return o(this,void 0,void 0,function*(){const{container:n,canvas:o}=i.Timeline.mount(t,"rules"),r=new i.Timeline({canvas:o,container:n,ext:new i.ExtensionManager({breakpointAnimation:{playAnimation:!0}})});return r.drawInfo.events=e,yield r.apply(),r.draw(),r})},e.drawFrom=function(t,e){return o(this,void 0,void 0,function*(){const{container:n,canvas:o}=i.Timeline.mount(t,"rules"),r=new i.Timeline({canvas:o,container:n,ext:new i.ExtensionManager({breakpointAnimation:{playAnimation:!0}})});return yield r.drawFrom(e),r})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),console.log('"Answer me sir. Are you guarding the righteousness? or just the rule?"\n"Let me do answer you! I choose the rule, because only the rule can brought the true righteousness!"\n'),n(57);var o=n(59);e.Timeline=o.default;var i=n(40);e.Axis=i.default;var r=n(43);e.AxisScale=r.default;var s=n(42);e.AxisMilestone=s.default;var a=n(41);e.AxisBody=a.default;var d=n(44);e.Event=d.default;var h=n(46);e.EventAxis=h.default;var c=n(45);e.EventBody=c.default;var f=n(3);e.Component=f.default;var l=n(47);e.ColorPicker=l.default;var u=n(20);e.ExtensionManager=u.ExtensionManager,e.BoxElementGenerator=u.BoxElementGenerator,e.GeneratorId=u.GeneratorId,e.PositionCounter=u.PositionCounter,e.BreakpointAnimation=u.BreakpointAnimation,e.ConflictFixer=u.ConflictFixer},function(t,e,n){var o=n(58);"string"==typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(19)(o,i);o.locals&&(t.exports=o.locals)},function(t,e,n){(t.exports=n(18)(!1)).push([t.i,".short-night.rules {\n  font-family: sans-serif; }\n  .short-night.rules.axis_milestone {\n    font-size: 12px;\n    color: #1e2122;\n    font-weight: bold;\n    padding: 0 0 0 32.5px; }\n  .short-night.rules.event_body {\n    color: #fff;\n    padding: 10px 41px 10px 14px; }\n    .short-night.rules.event_body .title, .short-night.rules.event_body .foldPlaceholder {\n      font-size: 13px;\n      color: #666666; }\n    .short-night.rules.event_body .date {\n      font-size: 9px;\n      color: #666666;\n      font-style: normal;\n      text-align: left; }\n    .short-night.rules.event_body .description {\n      font-size: 10px;\n      color: #999999; }\n  .short-night.rules.event_axis.endText {\n    font-size: 9px; }\n",""])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(2),i=n(40),r=n(44),s=n(47),a=n(61);e.default=class extends o.Timeline{constructor(t){super(Object.assign({grid:Object.assign({},o.Timeline.defaultGrid,{scaleHeight:1.5,axisWidth:1.5})},t)),this.theme="rules",this.axisConstructor=i.default,this.eventConstructor=r.default,this.ext.extensions.push(new s.default(this.ext),new a.default(this.ext))}draw(){const t=this.canvas.getContext("2d");return t.fillStyle="#f5f5f5",t.fillRect(0,0,this.canvas.width,this.canvas.height),super.draw()}}},function(t,e,n){"use strict";var o="a",i="b",r="c",s="d",a="e",d="f",h="g",c="h",f="i",l="j",u="k",w="l",p="n",x="m",y={MMMM:i,MM:r,Mo:p,YYYY:s,YY:a,dddd:d,DD:w,Do:u,h:h,H:x,mm:c,ss:f,a:l},m=["January","Febuary","March","April","May","June","July","August","September","October","November","December"],v=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function g(t){return t<10?"0"+t:""+t}t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(t){for(var e=[],n=0,i="";n<t.length;){var r=t[n++];if("{"===r){i&&e.push({t:o,v:i}),i="";var s="";for(r=t[n++];"}"!==r;)s+=r,r=t[n++];e.push({t:y[s]})}else i+=r}return i&&e.push({t:o,v:i}),e}(t);return{render:function(t){return function(t,e,n){for(var y,b=e.getMonth(),I=e.getFullYear(),E=e.getHours(),D=e.getSeconds(),k=e.getMinutes(),B=e.getDate(),_="",M=0;M<t.length;){var A=t[M];switch(A.t){case o:_+=A.v;break;case u:_+=(y=B)%10==1&&11!=y?y+"st":y%10==2&&12!=y?y+"nd":y%10==3&&13!=y?y+"rd":y+"th";break;case r:_+=m[b].slice(0,3);break;case i:_+=m[b];break;case p:var S=b+1;n.padMonth&&(S=g(S)),_+=S;break;case s:_+=I;break;case a:_+=(I+"").slice(2);break;case d:_+=v[e.getDay()];break;case w:_+=n.padDays?g(B):B;break;case h:var P=0===E||12===E?12:E%12;n.padHours&&(P=g(P)),_+=P;break;case x:var C=E;n.padHours&&(C=g(C)),_+=C;break;case c:_+=g(k);break;case f:_+=g(D);break;case l:_+=E>=12?"PM":"AM"}M++}return _}(n,t,e)}}}},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{d(o.next(t))}catch(t){r(t)}}function a(t){try{d(o.throw(t))}catch(t){r(t)}}function d(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}d((o=o.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(2),r=n(0);e.default=class{constructor(t){this.etx=t}onApply(t){return o(this,void 0,void 0,function*(){if(!i.AxisMilestone.is(t))return;const e=this.etx.components[r.SN.Timeline][0].grid;e.eventOffset.x=Math.max(e.eventOffset.x,t.drawInfo.bodyDrawInfo.start.x-t.drawInfo.box.x+12.5)})}}}]);